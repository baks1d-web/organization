<div class="modal hidden" id="add-modal" data-modal>
  <div class="modal-content">
    <div class="modal-header">
      <h3>Добавить</h3>
      <button class="icon-btn" data-action="modal.close" data-modal="add-modal">✕</button>
    </div>

    <div class="radio-group" data-add-type>
      <label><input type="radio" name="add-type" value="task" checked data-action="add.changeType"> Задача</label>
      <label><input type="radio" name="add-type" value="income" data-action="add.changeType"> Доход</label>
      <label><input type="radio" name="add-type" value="expense" data-action="add.changeType"> Расход</label>
    </div>

    <div id="add-task-fields">
      <input type="text" id="add-task-title" placeholder="Название задачи" />
      <textarea id="add-task-desc" placeholder="Описание (не обязательно)"></textarea>

      <div class="row">
        <label class="label">Срок исполнения</label>
        <input type="date" id="add-task-deadline" />
      </div>

      <div class="row">
        <label class="label">Исполнители</label>
        <div class="muted small" style="margin-bottom:8px;">Список включает всех пользователей, которые запускали бота.</div>
        <div id="add-task-assignees" class="assignees"></div>
      </div>
    </div>

    <div id="add-finance-fields" class="hidden">
      <textarea id="add-fin-desc" placeholder="Описание (не обязательно)"></textarea>
      <input type="number" id="add-fin-amount" placeholder="Сумма" />

      <div class="row">
        <label class="label">Статья</label>
        <div class="select-row">
          <select id="add-fin-category"></select>
          <button class="mini-btn" data-action="manage.open" data-mode="categories">✎</button>
        </div>
      </div>

      <div class="row">
        <label class="label">Способ</label>
        <div class="select-row">
          <select id="add-fin-method"></select>
          <button class="mini-btn" data-action="manage.open" data-mode="methods">✎</button>
        </div>
      </div>

      <div class="muted small">Редактирование статей/способов доступно в “Общие → Финансы”.</div>
    </div>

    <div class="modal-actions">
      <button class="ghost-btn" data-action="modal.close" data-modal="add-modal">Отмена</button>
      <button class="save-btn" data-action="add.save">Сохранить</button>
    </div>
  </div>
</div>
